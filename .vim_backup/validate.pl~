#!/usr/bin/perl

use strict;
use warnings;
use Params::Validate;
use Data::Dumper;

my %test = (
    foo => 'hoge',
    bar => 'moge',
    baz => 'tete'
);

sub test_func{
    Params::Validate::validate( @_,
        {
            foo => 1,
            bar => 1,
            baz => 0,
        }
    );
    return 1;
}

my $result = &test_func( %test );
print $result, "\n";
delete $test{baz};
warn Dumper \%test;

$result = &test_func( %test );
print $result, "\n";

delete $test{foo};
warn Dumper \%test;

eval { &test_func( %test ); };

print $@ if $@;
