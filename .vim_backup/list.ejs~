<!DOCTYPE html>
<!--[if IE 8 ]> <html lang="ja" class="IE8"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="ja" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta name="description" content="気に入らない食べ物が一切なく、毎日ドキドキワクワクお食事を提案するスマートフォンアプリ「バナナ」の公式ウェブサイトです。">
        <meta name="author" content="Team Banana">
        <meta name="keywords" content="">
        <meta property="fb:admins" content="">
        <meta property="fb:app_id" content="">
        <meta property="og:url" content="http://banana.jp/">
        <meta property="og:type" content="website">
        <meta property="og:title" content="banana（バナナ）｜目新しいお店を提案する">
        <meta property="og:description" content="気に入らない食べ物が一切なく、毎日ドキドキワクワクお食事を提案するスマートフォンアプリ「バナナ」の公式ウェブサイトです。">
        <meta property="og:image" content="http://nohana.jp/img/nohana_banner_250.png">
        <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap.min.css" rel="stylesheet">
        <link href="/stylesheets/banana.css" rel="stylesheet">
        <link href="/stylesheets/shoplist.css" rel="stylesheet">
        <link href="/images/banana.ico" type="image/vnd.microsoft.icon" rel="icon">
        <link href="/images/banana.ico" type="image/vnd.microsoft.icon" rel="shortcut icon">
        <link href="/images/banana64.png" rel="apple-touch-icon-precomposed">
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <script src="/javascripts/banana.iyada.list.js"></script>
        <script src="/javascripts/hot-query.js"></script>
        <title>いやだ検索 | 何を食べるか考えるのをやめよう</title>
    </head>

    <body class="index" data-twttr-rendered="true">
        <div class="navbar navbar-fixed-top center" style="top:-50px;">
            <div class="navbar-inner">
                <form class="wrapper" action='####' onsubmit='getRes();return false;'>
                    <input class="" type="text"/>
                    <span>は</span>
                    <a href="####" class="button navbar">いやだ！</a>
                </form>
            </div>
        </div>

        <div id="container" class="contets">
            <div id="hotwords">
                <% for(i in data) {%>
                <div class="image hotword" onclick='addHotQuery(this);'>
                        <h5><%= data[i].query %></h5>
                        <img src="/images/bubble.png" alt=""/>
                </div>
                <%}%>
            </div>
            <script type="text/javascript">
            //Todo: impl animation
            jQuery.fn.move = function(vertSpeed, horiSpeed, index) {
                var windowHeight = this.parent().height();
                var thisHeight = this.height();
                var thisWidth = this.width();
                var current = this;

                var parentWidth = (this.parent().width() - this.width()) / 2;
                var rand = Math.random() * (1000 * index);
                setInterval(function() {
                    current.css({
                        marginTop: function(index, value) {
                            return parseFloat(value) + vertSpeed;
                        },
                        marginLeft: function(index, value) {
                            /*
                            var distance = Math.sin(new Date().getTime() / (horiSpeed * 1000) + rand) + 1;
                            var delta = distance < 1 ? 0 : -thisHeight; 
                            return distance * parentWidth + delta;
                            */
                            return (Math.sin(new Date().getTime() / (horiSpeed * 1000) + rand) + 1) * parentWidth - thisHeight;
                        }
                    });
                }, 15);
                setInterval(function(){
                    var vertHeight = parseFloat(current.css("margin-top"));
                    var horiWidth = parseFloat(current.css("margin-left"));
                    if( vertHeight < 0 || vertHeight > windowHeight - thisHeight) {
                        vertSpeed = -vertSpeed;
                    }
                }, 250);
            };
            var hotwordsHeight = $("#hotwords").height();
            var Bubbles = $("#hotwords div");
            Bubbles.each(function() {
                // Set bubble size
                $(this).css("width", "90px");
                // Set bubble start position
                var width = Math.random() * window.innerWidth;
                var height = Math.random() * hotwordsHeight;
                $(this).css("left", width + 'px');
                $(this).css("top", height + 'px');
                // Move bubbles
                var index = 1;
                $(this).move(0.5, 5, index);
            });
            /*
            function move(element, speed) {
                // Todo: get the top property of element
                var top = 300;
                function frame() {
                    element.style.top = top + 'px';
                    top = top - speed;
                    if(top <= 0) {
                        clearInterval(id);
                    }
                    var left = (Math.sin(new Date().getTime() / 1000 + rand) + 1) * hotwordsHeight;
                    element.style.left = left + 'px';
                }
                var id = setInterval(frame, 1000);
            }
            */
           </script>

            <div class="form">
                <form class="wrapper" action='####' onsubmit='getFirstRes();return false;'>
                    <span>いやだ検索</span><br/><br/>
                    <span style="font-size:small">例：ラーメン、脂っこいもの、まずいもの</span><br/>
                    <span>　　</span>
                    <input class="JS_activeInput" type="text" tabindex="0" id="input"/>
                    <span>　は</span><br/>
                    <a href="####" class="button main" onclick='getFirstRes();'>　いやだ！</a>
                </form>
            </div>
        <!--/contents--></div>
    </body>
</html>
